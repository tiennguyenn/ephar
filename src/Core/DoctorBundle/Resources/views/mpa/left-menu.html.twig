{% set curRoute = app.request.get('_route') %}
{% set params = app.request.get('_route_params') %}
<input type='hidden' id="current-route-data" value="{{ path(curRoute, params) }}" />
<!-- BEGIN SIDEBAR -->
<div class="page-sidebar-wrapper"> 
    <!-- BEGIN SIDEBAR --> 
    <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing --> 
    <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
  <div class="page-sidebar navbar-collapse collapse"> 
      <!-- BEGIN SIDEBAR MENU --> 
      <!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) --> 
      <!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode --> 
      <!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode --> 
      <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing --> 
      <!-- DOC: Set data-keep-expand="true" to keep the submenues expanded --> 
      <!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
    <ul class="page-sidebar-menu" data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
    <li class="nav-item start {{ 'dashboard' == mainMenu ? 'open' : '' }}"> <a href="{{ path('doctor_dashboard') }}" class="nav-link nav-toggle"> <i class="fa fa-home"></i> <span class="title">Dashboard</span><span class="badge badge-success">{{countConfirmedPrescription()}}</span> <span class="selected"></span> </a></li>
    {% if 'patient_index' in app.user.permissions or 'patient_new' in app.user.permissions %}
      <li class="nav-item start {{ 'patient' == mainMenu ? 'open' : '' }}"> <a href="javascript:;" class="nav-link nav-toggle"> <i class="fa fa-user"></i> <span class="title">Patients</span><span class="arrow {{ 'patient' == mainMenu ? 'open' : '' }}"></a>
        <ul class="sub-menu" {% if 'patient' == mainMenu %}style="display: block;"{% endif %}>
          {% if app.user.permissions is empty or 'patient_index' in app.user.permissions %}
          <li class="nav-item {{ 'list-patient' == subMenu ? 'active' : '' }}"> <a href="{{ path('patient_index') }}" class="nav-link "> <span class="title">List Patients</span> </a> </li>
         {% endif %}
         {% if 'patient_new' in app.user.permissions %}
            <li class="nav-item {{ 'create-patient' == subMenu ? 'active' : '' }}"> <a href="{{ path('patient_new') }}" class="nav-link "> <span class="title">Register New Patient</span> </a> </li>
         {% endif %}
        </ul>
      </li>
    {% endif %}

    {% if 'create_rx' in app.user.permissions or 'list_rx' in app.user.permissions or 'list_draft_rx' in app.user.permissions or 'list_pending_rx' in app.user.permissions or 'list_confirmed_rx' in app.user.permissions or 'list_recalled_rx' in app.user.permissions or 'list_failed_rx' in app.user.permissions or 'list_reported_rx' in app.user.permissions %}
      <li class="nav-item {{ 'rx' == mainMenu ? 'open' : '' }}"> <a href="javascript:;" class="nav-link nav-toggle"> <i class="fa fa-file-text"></i> <span class="title">RX</span> <span class="arrow {{ 'rx' == mainMenu ? 'open' : '' }}"></span> </a>
        <ul class="sub-menu" {% if 'rx' == mainMenu %}style="display: block;"{% endif %}>
            {% set totalList = getRxListUnreadDoctor() %}
          {% if 'create_rx' in app.user.permissions %}
           <li class="nav-item {{ 'create' == subMenu ? 'active' : '' }}"> <a href="{{ path('index_rx') }}" class="nav-link "> <span class="title">Create New RX</span> </a> </li>
          {% endif %}
            {% if 'list_rx' in app.user.permissions %}
                <li class="nav-item {{ 'list' == subMenu ? 'active' : '' }}"> <a href="{{ path('list_rx') }}" class="nav-link "> <span class="title">All Rx</span> <span class="badge badge-danger">{% if totalList > 0 %}{{ totalList }}{% endif %}</span></a> </li>
            {% endif %}
          {% if 'list_draft_rx' in app.user.permissions %}
           <li class="nav-item {{ 'draft' == subMenu ? 'active' : '' }}"> <a href="{{ path('list_draft_rx') }}" class="nav-link "> <span class="title">Draft Rx</span> </a> </li>
          {% endif %}
          {% if 'list_scheduled_rx' in app.user.permissions %}
              <li class="nav-item "> <a href="{{ path('list_scheduled_rx') }}" class="nav-link "> <span class="title">Scheduled Rx Orders</span> </a> </li>
          {% endif %}
          {% set totalPending = getRxPendingUnreadDoctor() %}
          {% if 'list_pending_rx' in app.user.permissions %}
            <li class="nav-item {{ 'pending' == subMenu ? 'active' : '' }}"> <a href="{{ path('list_pending_rx') }}" class="nav-link "> <span class="title">Pending RX Orders</span><span class="badge badge-danger">{% if totalPending > 0 %}{{ totalPending }}{% endif %}</span> </a> </li>
          {% endif %}
          {% set totalConfirm  = getRxConfirmUnreadDoctor() %}
          {% if 'list_confirmed_rx' in app.user.permissions %}
            <li class="nav-item {{ 'confirmed' == subMenu ? 'active' : '' }}"> <a href="{{ path('list_confirmed_rx') }}" class="nav-link "> <span class="title">Paid Rx Orders</span><span class="badge badge-danger">{% if totalConfirm > 0 %}{{ totalConfirm }}{% endif %}</span></a> </li>
            {% endif %}
            {% set totalRecall  = getRxRecallUnreadDoctor() %}
            {% if 'list_recalled_rx' in app.user.permissions %}
             <li class="nav-item {{ 'recalled' == subMenu ? 'active' : '' }}"> <a href="{{ path('list_recalled_rx') }}" class="nav-link "> <span class="title">Recalled RX Orders</span><span class="badge badge-danger">{% if totalRecall > 0 %}{{ totalRecall }}{% endif %}</span> </a> </li>
            {% endif %}
            {% if 'list_failed_rx' in app.user.permissions %}
             <li class="nav-item {{ 'failed' == subMenu ? 'active' : '' }}"> <a href="{{ path('list_failed_rx') }}" class="nav-link "> <span class="title">Failed RX Orders</span> </a> </li>
            {% endif %}
            {% set totalReported  = getRxReportUnreadDoctor() %}
            {% if 'list_reported_rx' in app.user.permissions %}
             <li class="nav-item {{ 'reported' == subMenu ? 'active' : '' }}"> <a href="{{ path('list_reported_rx') }}" class="nav-link "> <span class="title">Rx Orders with reported issues</span><span class="badge badge-danger">{% if totalReported > 0 %}{{ totalReported }}{% endif %}</span> </a> </li>
            {% endif %}
        </ul>
      </li>
    {% endif %}

    {% if 'doctor_report_transaction_history' in app.user.permissions or 'doctor_report_monthly_statement' in app.user.permissions %}
      <li class="nav-item {{ 'report' == mainMenu ? 'open' : '' }}"> <a href="javascript:;" class="nav-link nav-toggle"> <i class="fa fa-bar-chart"></i> <span class="title">Reports</span> <span class="arrow {{ 'report' == mainMenu ? 'open' : '' }}"></span> </a>
        <ul class="sub-menu" {% if 'report' == mainMenu %}style="display: block;"{% endif %}>
        {% if 'doctor_report_transaction_history' in app.user.permissions %}
          <li class="nav-item {{ 'transaction-history' == subMenu ? 'active' : '' }}"> <a href="{{ path('doctor_report_transaction_history') }}" class="nav-link "> <span class="title">Rx Transaction History</span> </a> </li>
        {% endif %}
        {% if 'doctor_report_monthly_statement' in app.user.permissions %}
          <li class="nav-item {{ 'monhtly-statement' == subMenu ? 'active' : '' }}"> <a href="{{ path('doctor_report_monthly_statement') }}" class="nav-link "> <span class="title">Monthly Statements</span> </a> </li>
        {% endif %}
        </ul>
      </li>
    {% endif %}

        <li class="nav-item start {{ 'medicine-list' == mainMenu ? 'open' : '' }}">
            <a href="javascript:;" class="nav-link nav-toggle">
                <i class="fa fa-file-text"></i>
                <span class="title">Resources</span>
                <span class="arrow"></span>
            </a>
            <ul class="sub-menu">
                <li class="nav-item"> <a href="{{ path('doctor_user_guide') }}" class="nav-link" target="_blank"> <span class="title">Doctor's User Guide</span> </a> </li>

                <li class="nav-item {{ 'medicine-list' == subMenu ? 'active' : '' }}"> <a href="{{path('doctor_medicine_list')}}" class="nav-link "> <span class="title">Medicine List (A - Z)</span> </a> </li>
                {% if 'doctor_custom_selling_prices' in app.user.permissions %}
                <li class="nav-item {{ 'selling-price' == subMenu ? 'active' : '' }}"> <a href="{{path('doctor_custom_selling_prices')}}" class="nav-link "> <span class="title">Custom selling prices</span> </a> </li>
                {% endif %}
            </ul>
        </li>
    </ul>
    <!-- END SIDEBAR MENU --> 
  </div>
  <!-- END SIDEBAR --> 
</div>
<!-- END SIDEBAR -->